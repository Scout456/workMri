(function(d){"object"===typeof module&&module.exports?module.exports=d():(window.Granite=window.Granite||{}).Util=d()})(function(){return{patchText:function(d,k){if(k)if("[object Array]"!==Object.prototype.toString.call(k))d=d.replace("{0}",k);else for(var f=0;f<k.length;f++)d=d.replace("{"+f+"}",k[f]);return d},getTopWindow:function(){var d=window;if(this.iFrameTopWindow)return this.iFrameTopWindow;try{for(;d.parent&&d!==d.parent&&d.parent.location.href;)d=d.parent}catch(k){}return d},setIFrameMode:function(d){this.iFrameTopWindow=
d||window},applyDefaults:function(){for(var d,k=arguments[0]||{},f=1;f<arguments.length;f++){d=arguments[f];for(var m in d){var l=d[m];d.hasOwnProperty(m)&&void 0!==l&&(k[m]=null===l||"object"!==typeof l||l instanceof Array?l instanceof Array?l.slice(0):l:this.applyDefaults(k[m],l))}}return k},getKeyCode:function(d){return d.keyCode?d.keyCode:d.which}}});
(function(d){"object"===typeof module&&module.exports?module.exports=d(require("@granite/util"),require("jquery")):window.Granite.HTTP=d(Granite.Util,jQuery)})(function(d,k){return function(){var f=null,m=/^(?:http|https):\/\/[^/]+(\/.*)\/(?:etc\.clientlibs|etc(\/.*)*\/clientlibs|libs(\/.*)*\/clientlibs|apps(\/.*)*\/clientlibs|etc\/designs).*\.js(\?.*)?$/,l=/[^\w-.~%:/?[\]@!$&'()*+,;=]/,q=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,p=!1,e={getSchemeAndAuthority:function(a){if(!a)return"";
a=q.exec(a);return null===a?"":[a[1],a[3]].join("")},getContextPath:function(){null===f&&(f=e.detectContextPath());return f},detectContextPath:function(){try{if(window.CQURLInfo)f=CQURLInfo.contextPath||"";else{for(var a=document.getElementsByTagName("script"),b=0;b<a.length;b++){var c=m.exec(a[b].src);if(c)return f=c[1]}f=""}}catch(h){}return f},externalize:function(a){try{0===a.indexOf("/")&&e.getContextPath()&&0!==a.indexOf(e.getContextPath()+"/")&&(a=e.getContextPath()+a)}catch(b){}return a},
internalize:function(a,b){if("/"===a.charAt(0))return f===a?"":f&&0===a.indexOf(f+"/")?a.substring(f.length):a;b||(b=document);b=e.getSchemeAndAuthority(b.location.href);var c=e.getSchemeAndAuthority(a);return b===c?a.substring(c.length+(f?f.length:0)):a},getPath:function(a){if(a)a=e.removeParameters(a),a=e.removeAnchor(a);else{if(window.CQURLInfo&&CQURLInfo.requestPath)return CQURLInfo.requestPath;a=window.location.pathname}a=e.internalize(a);var b=a.indexOf(".",a.lastIndexOf("/"));-1!==b&&(a=a.substring(0,
b));return a},removeAnchor:function(a){var b=a.indexOf("#");return 0<=b?a.substring(0,b):a},removeParameters:function(a){var b=a.indexOf("?");return 0<=b?a.substring(0,b):a},encodePathOfURI:function(a){for(var b=["?","#"],c=[a],h,g=0,n=b.length;g<n;g++)if(h=b[g],0<=a.indexOf(h)){c=a.split(h);break}l.test(c[0])&&(c[0]=e.encodePath(c[0]));return c.join(h)},encodePath:function(a){a=encodeURI(a);a=a.replace(/%5B/g,"[").replace(/%5D/g,"]");a=a.replace(/\?/g,"%3F");return a=a.replace(/#/g,"%23")},handleLoginRedirect:function(){if(!p){p=
!0;alert(Granite.I18n.get("Your request could not be completed because you have been signed out."));var a=d.getTopWindow().document.location;a.href=e.externalize("/")+"?resource\x3d"+encodeURIComponent(a.pathname+a.search+a.hash)}},getXhrHook:function(a,b,c){return window.G_XHR_HOOK&&"function"===typeof G_XHR_HOOK?(a={url:a,method:b||"GET"},c&&(a.params=c),G_XHR_HOOK(a)):null},eval:function(a){"object"!==typeof a&&(a=k.ajax({url:a,type:"get",async:!1}));try{return JSON.parse(a.body?a.body:a.responseText)}catch(b){}return null}};
return e}()});
(function(d){"object"===typeof module&&module.exports?module.exports=d(require("@granite/http")):window.Granite.I18n=d(window.Granite.HTTP)})(function(d){return function(){var k={},f="/libs/cq/i18n/dict.",m=".json",l=void 0,q=!1,p=null,e={},a=!1;e.LOCALE_DEFAULT="en";e.PSEUDO_LANGUAGE="zz";e.PSEUDO_PATTERN_KEY="_pseudoPattern_";e.init=function(b){b=b||{};this.setLocale(b.locale);this.setUrlPrefix(b.urlPrefix);this.setUrlSuffix(b.urlSuffix)};e.setLocale=function(b){b&&(l=b)};e.getLocale=function(){"function"===
typeof l&&(l=l());return l||document.documentElement.lang||e.LOCALE_DEFAULT};e.setUrlPrefix=function(b){b&&(f=b,a=!0)};e.setUrlSuffix=function(b){b&&(m=b,a=!0)};e.getDictionary=function(b){b=b||e.getLocale();if(!k[b]){q=0===b.indexOf(e.PSEUDO_LANGUAGE);try{var c=new XMLHttpRequest,h=c.open,g=d.externalize;var n=b;if(a)var r=f+n+m;else{var t,u=document.querySelector("html");u&&(t=u.getAttribute("data-i18n-dictionary-src"));r=t?t.replace("{locale}",encodeURIComponent(n)).replace("{+locale}",n):f+n+
m}h.call(c,"GET",g.call(d,r),!1);c.send();k[b]=JSON.parse(c.responseText)}catch(v){}k[b]||(k[b]={})}return k[b]};e.get=function(b,c,h){var g;var n=e.getDictionary();var r=q?e.PSEUDO_PATTERN_KEY:h?b+" (("+h+"))":b;n&&(g=n[r]);g||(g=b);q&&(g=g.replace("{string}",b).replace("{comment}",h?h:""));b=g;if(c)if(Array.isArray(c))for(h=0;h<c.length;h++)b=b.replace("{"+h+"}",c[h]);else b=b.replace("{0}",c);return b};e.getVar=function(b,c){return b?e.get(b,null,c):null};e.getLanguages=function(){if(!p)try{var b=
d.externalize("/libs/wcm/core/resources/languages.overlay.infinity.json"),c=new XMLHttpRequest;c.open("GET",b,!1);c.send();var h=JSON.parse(c.responseText);Object.keys(h).forEach(function(g){g=h[g];g.language&&(g.title=e.getVar(g.language));g.title&&g.country&&"*"!==g.country&&(g.title+=" ("+e.getVar(g.country)+")")});p=h}catch(g){p={}}return p};e.parseLocale=function(b){if(!b)return null;var c=b.indexOf("_");0>c&&(c=b.indexOf("-"));if(0>c){var h=b;c=null}else h=b.substring(0,c),c=b.substring(c+1);
return{code:b,language:h,country:c}};return e}()});